<head>
	<link rel="stylesheet" type="text/css" href="/styles.css">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/img/favicon.ico" type="image/x-icon">
	<title>Eutopía - Ecoaldea</title>

		<script type="text/javascript" src="/js/common-admin.js"></script>

	<script type="text/javascript">
		window.SERVER={
			API_URL: 'https://utopiaecoaldea.herokuapp.com'
		}
	</script>
</head>
<body>

	

		<section class="admin_header">
	        <h3 class="brand">
	        <a href="/">Eutopía - Ecoaldea</a>
	         - Admin</h3>
	        <hr>
	    </section>

	<div class="mainContent">
		<section class="admin">
		    <section class="admin_login">
		        <input class="password" type="password" placeholder="password" v-model="password" ref="pwd"/>
		        <button class="login" @click="login()">Ingresar</button>
		        <hr>
		    </section>
		</section>
	</div>

	<!--

	<section class="common_sections">
		<section class="team">
			<h2 class="title">Sobre nosotros</h2>
			<article>
				<p class="text">Lorem ipsum team. Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.</p>
			</article>
		</section>
		<section class="contact">
			<h2 class="title">Contacto</h2>
			<article>
				<p class="text">Lorem ipsum team. Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.</p>
			</article>
		</section>
		<section class="volunteers">
			<h2 class="title">Voluntariado</h2>
			<article>
				<p class="text">Lorem ipsum team. Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.</p>
			</article>
		</section>
		<section class="legalMentions">
			<h2 class="title">Menciones legales</h2>
			<article>
				<p class="text">Lorem ipsum team. Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.</p>
			</article>
		</section>

		<section class="hospedajesCamping">
			<h2 class="title">Hospedajes: Camping</h2>
			<article>
				<p class="text">Lorem ipsum team. Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.Lorem ipsum team.</p>
			</article>
		</section>
	</section>

-->

	

	<script type="text/javascript" src="/libs/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="/libs/vue.js"></script>
	<!--
	<script type="text/javascript" src="/bundle.js"></script>
-->
	<script type="text/javascript">
			function init() {

				new Vue({
					el: '.admin_login',
					name: 'admin_login',
					data(){
						return {
							password:''
						}
					},
					created() {
						console.log('admin_login')
					},
					methods: {
						login
					}
				})

				function login() {
					var password = this.password;
					var encoded = window.btoa(password);
					fetch(`${SERVER.API_URL}/api/login/validate?code=${encoded}`).then(r => r.json().then(response => {
						if (response.result) {
							window.localStorage.setItem('adminToken', encoded);
							window.location.href="/admin/dashboard";
						} else {
							this.$refs.pwd.focus();
						}
					}));
				}
			}
			if(!!init){
				init();
			}
	</script>
</body>