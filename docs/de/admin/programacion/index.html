<!DOCTYPE html>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Pragma" content="no-cache">
	
	<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/img/favicon.ico" type="image/x-icon">
	<title>Eutopía - Ecoaldea</title>
	<link rel="stylesheet" type="text/css" href="/libs/noty.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="https://cdn.quilljs.com/1.3.6/quill.snow.css">
	<link rel="stylesheet" type="text/css" href="/styles.css">
</head>
<body>
	<div class="app">
		
		<div class="adminLayout">
			<div class="adminSidebar">
				<header >
					<a class="brand" href="/de">
						<img src="/uploads/images/euto-logo-trans.png" />
					</a>
					<nav class="headerNav">
						
					</nav>
				</header>
				<div class="blockChilds form developmentPage adminNav admin protected" style="display: none;">
				    <a class="backBtn" href="/" target="_blank">Abrir pagina en una nueva pestaña.</a>
				    <div>
				        <p class="italic fnt-12" style="margin-top:5px">
				            <span>Pagina actualizada el <span v-html="deployedAt"></span></span>
				        </p>
				    </div>
				    <div>
				        <button class="btn" v-cloak v-if="true" @click="(loaders.deploy||isCooldown('deploy'))||deploy()" :disabled="loaders.deploy||isCooldown('deploy')" v-html="loaders.deploy?'Publicando...':'Publicar cambios'"></button>
				        <p class="italic fnt-12" style="margin-top:5px" v-show="isCooldown('deploy')">
				            Cambios publicados recientemente, espera un momento...
				        </p>
				    </div>
				    <!--
				    
				    <div>
				        <button class="btn" v-cloak v-if="true" @click="loaders.wipMode||(isCooldown('wipMode'))||deployWipMode()" :disabled="loaders.wipMode||isCooldown('wipMode')" v-html="loaders.wipMode?'Procesando...':'Actualizar sitio con mensaje indicando que estamos trabajando en la pagina'"></button>
				        <p class="italic fnt-12" style="margin-top:5px" v-show="isCooldown('wipMode')">
				            Cambios publicados recientemente, espera un momento...
				        </p>
				    </div>
				    <p class="fnt-12 italic">Al publicar, el sitio toma entre uno y dos minutos en actualizarse. Una vez pasado este tiempo tenemos que refrescar el navegador manualmente. Si los cambios no aparecen, intentar refrescar el navegador pulsando CTRL+R en reiteradas ocaciones.</p>
				-->
				    <div class="sidebarMenu">
				
				    <a href="/admin/programacion">
				            <i class="fas fa-calendar-alt"></i>
				            Programacion
				        </a>
				    <a href="/admin/voluntarios">
				            <i class="fas fa-people-carry"></i>
				            Voluntarios
				        </a>
				    <a href="/admin/formulario-de-contacto">
				            <i class="fas fa-phone-volume"></i>
				            Contactos
				        </a>
				    <a href="/admin/images">
				            <i class="fas fa-images"></i>
				            Imagenes 
				        </a>
				    <a href="/admin/files">
				            <i class="fas fa-file"></i>
				            Archivos
				        </a>
				    <a href="/admin/pages">
				            <i class="fas fa-book"></i>
				            Paginas
				        </a>
				    <a href="/admin/partials">
				            <i class="fas fa-boxes"></i>
				            Vistas parciales
				        </a>
				
				<a href="/admin/styles">
				            <i class="fas fa-cookie-bite"></i>
				            Estilos CSS
				        </a>
				
				    <a href="/admin/changelog">
				            <i class="fas fa-clipboard-list"></i>
				            Historial de cambios
				        </a>
				    <a href="/admin/faq">
				            <i class="fas fa-book"></i>
				            Documentacion
				        </a>
				    <a href="/admin/avanzado">
				        <i class="fas fa-cogs"></i>
				        Configuracion avanzada</a>
				    <a @click="logout()" class="logout">
				
				        Desconectarse</a>
				        </div>
				</div>
			</div>
			<div class="adminMainContent">
				<div class="mainContent">
					<section class="admin protected container appScope">
					    <h3>Programacion</h3>
					    <button @click="saving || save()" :disabled="saving" class="btn" v-html="saving?'Guardando...':'Guardar'"></button>
					    <button @click="showForm=true" v-show="!showForm" class="btn">Nuevo evento</button>
					    <button @click="sort" v-show="true" class="btn">Ordenar por fecha</button>
					    <div class="form programacionForm" v-show="showForm">
					        <label class="important">Nuevo evento</label>
					        <label>Fecha desde*</label>
					        <input placeholder="DD-MM-YYYY" v-model="form.fechaDesde" />
					        <label>Fecha hasta</label>
					        <input placeholder="DD-MM-YYYY" v-model="form.fechaHasta" />
					        <label>Titulo *</label>
					        <input v-model="form.title" placeholder="Ejemplo: Feria de los artesanos" />
					        <button class="btn" @click="addEvent()">Agregar</button>
					    </div>
					    <ul class="list">
					        <li class="programationItem" v-for="evento in programacion" v-show="showProgramacion(evento)">
					            <div class="eventItem form">
					                <label>Fecha desde</label>
					                <input class="eventoFecha semless " v-model="evento.fechaDesde"></input>
					                <label>Fecha hasta</label>
					                <input class="eventoFecha semless " v-model="evento.fechaHasta"></input>
					                <label>Horario</label>
					                <p class="fnt-12 italic" v-html="(evento.timeFrom||'(Sin especificar)')+' a '+(evento.timeTo||'(Sin especificar)')"></p>
					                <div>
					                    <input class="eventoTitle semless bold" v-model="evento.title"></input>
					                </div>
					                <button class="btn" @click="evento.showInfo=!evento.showInfo" v-show="!evento.showInfo">Ver mas</button>
					                <button class="btn" @click="evento.showInfo=!evento.showInfo" v-show="evento.showInfo">Ver menos</button>
					                <div class="bigDesktopSplitTwo" v-show="evento.showInfo">
					                    <div class="adminProgramacionItemImage">
					                        <img class="img-fluid" :src="evento.image||'https://via.placeholder.com/150x150'"/>
					                    </div>
					                    <div>
					                            
					                            <div>
					                                <html-editor v-model="evento.message"></html-editor>
					                            </div>
					                            <div class="blockChilds">
					                                <label>Mostrar en el sitio web? (si no chequeas esto, el evento permanecera oculto)</label>
					                                <input type="checkbox" v-model="evento.show" />
					                            </div>
					                            <div class="blockChilds">
					                                <label>Imagen</label>
					                                <input v-model="evento.image" />
					                            </div>
					                            <div class="blockChilds">
					                                <label>Hora desde</label>
					                                <input v-model="evento.timeFrom" placeholder="HH:mm" />
					                            </div>
					                            <div class="blockChilds">
					                                <label>Hora hasta</label>
					                                <input v-model="evento.timeTo" placeholder="HH:mm" />
					                            </div>
					                            <div>
					                                <button @click="remove(evento.id)" class="btn danger"><i class="fas fa-trash-alt"></i></button>
					                            </div>
					                    </div>
					                </div>
					            </div>
					        </li>
					    </ul>
					</section>
					<script type="text/javascript">
					window.programacion = JSON.parse(`[{"fechaDesde":"27-07-2019","fechaHasta":"28-07-2019","id":"_y90yolgdx","title":"ECOFESTIVAL para la familia (FESTICAMP)","image":"\\/uploads\\/images\\/festicamp.png","message":"<p>FESTICAMP es un festival que busca acercar a las familias<\\/p><p>chiclayanas (o lambayecanas) a marcas e iniciativas eco<\\/p><p>amigables y tradicionales de la región. Durante los días del<\\/p><p>festival daremos a conocer las prácticas que aplicamos en la<\\/p><p>producción de nuestros cultivos, productos, artículos y<\\/p><p>servicios y en nuestro día a día en general para llevar un estilo<\\/p><p>de vida más sustentable.<\\/p><p>Contaremos con espacios para la feria, talleres, música en vivo,<\\/p><p>malabares, juegos y zona de campamento.<\\/p>","time":"","show":true},{"fechaDesde":"20-06-2019","fechaHasta":"20-06-2019","id":"_vwv0vey39","title":"Registro fotografico: Brigadistas ambientales","image":"\\/uploads\\/images\\/brigadistas_20062019_13.jpg","message":"<p>Se realizo la primera induccion del añio a los brigadistas ambientales de las escuelas<\\/p>","slider":["\\/uploads\\/images\\/brigadistas_20062019_01.jpg","\\/uploads\\/images\\/brigadistas_20062019_02.jpg","\\/uploads\\/images\\/brigadistas_20062019_03.jpg","\\/uploads\\/images\\/brigadistas_20062019_04.jpg","\\/uploads\\/images\\/brigadistas_20062019_05.jpg","\\/uploads\\/images\\/brigadistas_20062019_06.jpg","\\/uploads\\/images\\/brigadistas_20062019_07.jpg","\\/uploads\\/images\\/brigadistas_20062019_08.jpg","\\/uploads\\/images\\/brigadistas_20062019_09.jpg","\\/uploads\\/images\\/brigadistas_20062019_10.jpg","\\/uploads\\/images\\/brigadistas_20062019_11.jpg","\\/uploads\\/images\\/brigadistas_20062019_12.jpg","\\/uploads\\/images\\/brigadistas_20062019_13.jpg","\\/uploads\\/images\\/brigadistas_20062019_14.jpg","\\/uploads\\/images\\/brigadistas_20062019_15.jpg","\\/uploads\\/images\\/brigadistas_20062019_16.jpg","\\/uploads\\/images\\/brigadistas_20062019_17.jpg","\\/uploads\\/images\\/brigadistas_20062019_18.jpg"],"time":"","show":true},{"fechaDesde":"21-04-2019","fechaHasta":"21-04-2019","id":"_e8whpwyh8","title":"Taller Vivencial de Elaboración de Algarrobina (Programa C.R.E.E.R)","image":"\\/uploads\\/images\\/programa-creer-2.jpeg","message":"<p>Programa C.R.E.E.R.<\\/p><p>Taller Vivencial de Elaboración de Algarrobina...<\\/p><p>07 vacantes por grupo.<\\/p><p>Grupo 1: Jueves 21,&nbsp;<\\/p><p>Grupo 2: Sábado 23,<\\/p><p>Horario: 9:30 a.m. - 4:00 p.m.<\\/p><p>Inscripciones al 925542300 o por inbox<\\/p><p>Aportacción: 25.00 soles, incluye almuerzo campestre...<\\/p>","slider":["\\/uploads\\/images\\/programa-creer-3.jpeg","\\/uploads\\/images\\/programa-creer-5.jpeg","\\/uploads\\/images\\/programa-creer-2.jpeg","\\/uploads\\/images\\/programa-creer-1.jpeg"],"time":"","show":true,"timeFrom":"09:30","timeTo":"16:00"},{"fechaDesde":"09-03-2019","fechaHasta":"09-03-2019","id":"_vbedi7n27","title":"PARTICIPACIÓN EN MERCADO ECOLOGICO - ALIANZA FRANCESA","image":"\\/uploads\\/images\\/spring-season-sale-2.png","message":"<p><br><\\/p>","time":"","show":true},{"fechaDesde":"09\\/03\\/2019","fechaHasta":"09\\/03\\/2019","id":"_bwv0vey29","title":"MERCADO ECOLÓGICO ALIANZA FRANCESA","image":"","message":"","time":"","show":false},{"fechaDesde":"09-02-2019","fechaHasta":"09-02-2019","id":"_zl6dtjfhr","title":"ELABORACIÓN DE JABÓN NATURAL Y ARTESANAL, ","image":"\\/uploads\\/images\\/spring-season-sale-1.png","message":"","time":"","show":true},{"fechaDesde":"01-02-2019","fechaHasta":"24-02-2019","id":"_0wbuv0pg6","title":"BIOCONSTRUYENDO EN EUTOPIA ","image":"","message":"","time":"","show":true},{"fechaDesde":"15-01-2019","fechaHasta":"16-01-2019","id":"_3i1jeh7cb","title":"Minga: Remodelación escenario Q'uncha Pachaq","image":"\\/uploads\\/images\\/1.jpg","message":"<p>Continuaremos con la construcción del muro de contención y el llenado de la plataforma del escenario.<\\/p><p>Escríbenos y únete a la minga!<\\/p>","timeFrom":"08:00","timeTo":"16:00","show":true},{"fechaDesde":"14-01-2019","fechaHasta":"15-02-2019","id":"_n43bj65dh","title":"“Pachawasi” Ecoverano 2019","image":"\\/uploads\\/images\\/evento-pachawasi-3.jpg","message":"<p>Pachawasi Ecoverano es un programa educativo piloto que durará 4 semanas que aborda el aprendizaje a través de proyectos en las áreas de matemáticas, comunicación y habilidades sociales con lenguajes artísticos.<\\/p><p><span style=\\\"background-color: rgb(255, 255, 255); color: rgb(34, 34, 34);\\\">La duración del programa es del 14 de enero al 15 de febrero.&nbsp;&nbsp;<\\/span><\\/p><p>Los horarios son de lunes a viernes en dos espacios, martes y jueves en espacio urbano y lunes, miércoles y viernes en Eutopia Ecoaldea.<\\/p><p>Descarga nuestro <a href=\\\"https:\\/\\/eutopiaecoaldea.com\\/uploads\\/files\\/evento-pachawasi-doc-1.docx\\\" target=\\\"_blank\\\">documento explicativo<\\/a>.<\\/p><p>Los esperamos !<\\/p>","slider":["\\/uploads\\/images\\/evento-pachawasi-1.jpg"],"time":"","show":true},{"fechaDesde":"21-12-2018","id":"_t0ykghezt","title":"REMODELACIÓN DE ESCENARIO","image":"\\/uploads\\/images\\/albergue-construccion.jpeg","message":"<p>Construiremos muro de contención en piedra,muros posteriores de escenario y nivelaremos piso<\\/p>","time":"","show":true}]`);
					</script>				</div>
			</div>
		</div>
		
		
		
	</div>
	<script type="text/javascript" src="/js/common-admin.js"></script>
	<script type="text/javascript">
		window.vues = {};
		window.SERVER={
			API_URL: 'http://localhost:3002',
			currentPage: 'page_admin_programacion',
	currentLanguage: 'Aleman',
			defaultCurrentPage:'page_ecoaldea',
			updateCode:'ZYBnt9si1',
			wipMode: 'false',
			lang: JSON.parse(`{"COMO_FUNCIONA":"etc..","PRODUCTOS_CATALOGO_TITULO":"Nuestra aldea tambien produce una variedad de productos organicos y buenos para la salud!","PRODUCTOS_CATALOGO_BOTON_DESCARGA":"Descarga nuestro catalogo","CONOCER_FERIA":"Conoce nuestra feria","VOLUNTARIADO_FORM_TITLE":"Solicitud","DESCARGA_PROPUESTA":"Descarga nuestra propuesta","ACTUALIDADES":"Actualidades","VOLUNTARIADO_ENVIAR_SOLICITUD_ERROR":"No pudimos registrar tu solicitud, por favor intenta en otro momento o envianos un email directamente con la informacion. Gracias !","VOLUNTARIADO_ENVIAR_SOLICITUD_SUCCESS":"Gracias por tu solicitud, ya nos pondremos en contacto contigo :)","PROGRAMACION":"Programacion","ENVIAR":"Enviar","TELEFONO":"Telefono","MENSAJE":"Mensaje","EMAIL":"Email","NOMBRE_APELLIDO":"Nombre y apellido","HEADER_MESSAGE":"Vive la experiencia de la naturaleza","FERIAS_PRODUCTORES":"Ferias de productores","NUESTROS_PRODUCTOS":"Nuestros productos","PRODUCTOS_FERIAS":"Productos y ferias","PRODUCTOS_FERIAS_INTRO":"Feria de productos biologicos y locales !                Ven a nuestra aldea para conocer productores responsables, probar                sus productos deliciosos y disfrutar del fin de semana lejos del                estress de la ciudad !","FERIAS_PRODUCTORES_CONTENT_1":"Estamos comprometidos en ayudar a los productores locales vender su producción a precio justo en el mercado local para ofrecer lo mejor a la población de Chiclayo y alrededores.<br>        Cada 2 fines de semana, organizamos en la aldea una gran feria de productos organicos en las cuales participan una variedad de productores locales.<br>        Encontrarás yogures, quesos, miel, frutas, verduras, bebidas refrescantes, todo natural y organico !","FERIAS_PRODUCTORES_CONTENT_2":"Aprovecha visitarnos en estas ferias para disfrutar de nuestro eco-centro y pasar un día en familia lejos del estress de la ciudad.","FERIAS_PRODUCTORES_CONTENT_3":"Proponemos una zona de juego, piscina, zona de descanso, biblioteca.<br>                    Eco-restaurante con productos frescos y orgánicos cocinados en el momento.<br>                    Talleres y actividades variadas para aprender a toda edad sobre la permacultura, las plantas, la arcilla, la pintura o también practicar la meditación, el yoga y el tai-chi !<br>                    Visita guiada de nuestro vivero, la huerta, el centro de tratamiento de los desechos.<br>                    Escenario con música en vivo y otros espectaculos (ver programacion)<br>                    Zona de camping<br>                    Y mucho más !","PROFESIONALES":"Empresas","FAMILIAS":"Familias","ESCUELAS":"Escuelas","ADULTOS":"Centros de Atencion para Adultos Mayores","pr":"Portugués","it":"Italiano","de":"Aleman","fr":"Frances","en":"Ingles","es":"Español","IDIOMAS":"Idioma","GRUPOS":"Grupos","GRUPOS_INTRO":"Familia, escuela, empresa, organiza sus eventos en nuestra aldea !","GRUPOS_CONTENT_1":"Proponemos un panel de actividades, visitas y talleres para diseñar eventos a su medida, siempre en el respeto de nuestros valores, aprendiendo, compartiendo y disfrutando en la naturaleza para momentos inolvidables !","ESCUELAS_1":"Acompanamos sus estudiantes en la creacion y el mantenimiento de una huerta, un vivero y un centro de tratamiento de los desechos para el plan ambiantal de su escuela.","ADULTOS_1":"Les ayudamos mejorar la calidad de vida de sus pacientes.                Proponemos dias de relajacion en nuestra aldea, con actividades                simples para aprender y compartir conocimientos sobre la naturaleza, la permacultura y las plantas que nos                ayudan a estar en buena salud.","EMPRESAS_1":"Organiza sus seminarios y celebraciones en nuestro eco-centro para                        ofrecer a sus empleados un momento unico.                        Espiritu de equipo, enfoque en el momento presente y desconnexion                        con el estress del dia dia.","FAMILIAS_1":"Vengan a disfrutar de un fin de semana unico en el campo, con                    actividades y aprendizajes para toda la familia, desconnectados del                    estress de la ciudad ! Lo ideal para festejar sus cumpleanos,                    graduaciones, anniversarios.","HEADER_HOME_LABEL":"Descubrir","HOME_INTRO":"Ven a disfrutar de nuestra aldea cada fin de semana !","HOME_CONTENT_1":"Nuestro eco-centro en la naturaleza está abierto cada fin de semana para brindarle un lugar recreativo y de relajación donde toda la familia encontrará su felicidad.","HOME_CONTENT_2":"Zona de juego, piscina, zona de descanso, biblioteca.<br>                    Eco-restaurante con productos frescos y orgánicos cocinados en el momento.<br>                    Talleres y actividades variadas para aprender a toda edad sobre la permacultura, las plantas, la arcilla, la pintura o también practicar la meditación, el yoga y el tai-chi !<br>                    Visita guiada de nuestro vivero, la huerta, el centro de tratamiento de los desechos.<br>                    Escenario con música en vivo y otros espectaculos (ver programacion)<br>                    Zona de camping<br>                    Y mucho más !","HOME_CONTENT_3":"Los horarios de atencion al publico son del sábado al domingo, de las 9h a las 18h.","ECOALDEA":"Ecoaldea","VOLUNTARIADO":"Voluntariado","VOLUNTARIADO_CONTENT_1":"Por que estas interesado en visitarnos?","VOLUNTARIADO_CONTENT_2":"Con que te gustaria ayudar o que proyecto te gustaria proponer?","VOLUNTARIADO_CONTENT_3":"En que epoca pensas venir ?","CONTACTO":"Kontakt","ABOUT_US":"Über uns","ABOUT_US_CONTENT_1":"Somos un equipo que busca vivir de manera autosustentable, promoviendo permacultura, agroecología, eco-pedagogía y vida saludable, generando emprendimientos que permitan financiar nuestras actividades.","MISSION":"Mision","MISSION_CONTENT_1":"Compartir un espacio para la conexión profunda con la Naturaleza, con uno mismo y con las demás personas, que permite distintas formas de relacionarnos e interactuar con otros seres vivos, y compartir nuestras experiencias con quienes estén interesados en ellas.","VISION":"Vision","VISION_CONTENT_1":"Ser una Ecoaldea sustentable, reconocida por su misión y la diversidad de sus cultivos, productos y servicios propuestos a la comunidad.","META_TITLE":"Eutopía - Ecoaldea","HOSPEDAJES":"Hospedajes","HOSPEDAJES_CONTENT_1":"Nuestra aldea propone varios espacios y servicios de alojamiento para que puedas pasar la noche en la naturaleza y que dure más el fin de semana !","HOSPEDAJES_TITLE_1":"Zona de camping","HOSPEDAJES_CONTENT_2":"Con duchas, banos, electricidad, cocina equipada, zona de recreacion, piscina, y mucho más ! 10 soles por carpa.","HOSPEDAJES_TITLE_2":"Eco-Albergue","HOSPEDAJES_CONTENT_3":"Estamos construyendo una albergue para fines de semana en la naturaleza, con todo el confort de su casa ! Apertura en Febrero 2019, mantente al tanto !"}`)
		}
	</script>
	<script type="text/javascript" src="/libs/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.21/vue.min.js"></script>
	<script type="text/javascript" src='/libs/vue-components.js'></script>
	
	<script type="text/javascript" src="/libs/moment.js"></script>
	<script type="text/javascript" src="/libs/noty.min.js"></script>
	
	<script type="text/javascript" src="/libs/slider.js"></script>

	<script type="text/javascript">
		window.moment.locale('es');
	</script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/ace.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/theme-monokai.js"></script>
	
	<script type="text/javascript" src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
	<script type="text/javascript">
			function init() {


				new Vue({
					el: '.appScope',
					name: 'adminProgramacion',
					data() {
						return {
							showForm: false,
							form: {
								fecha: '',
								title: ''
							},
							saving: false,
							programacion: this.normalize(window.programacion)
						}
					},
					created() {
						fetch(`${SERVER.API_URL}/api/programacion/fetch`).then(r => r.json().then(response => {
							//this.programacion = this.normalize(response.result);
						}));
					},
					mounted() {
						this.sort();
					},
					methods: {
						sort(){
							this.programacion = this.programacion.sort(function(a,b){
								return moment(a.fechaDesde,'DD-MM-YYYY').isBefore(moment(b.fechaDesde,'DD-MM-YYYY'),'day') ? 1 : -1;
							});
						},
						addEvent() {
							this.programacion = this.programacion || [];
							if(!this.form.fechaDesde || !this.form.title){
								return;
							}
							this.programacion.push({
								fechaDesde: this.form.fechaDesde,
								fechaHasta: this.form.fechaHasta || '',
								id: window.generateId(),
								title: this.form.title,
								image: '',
								message: '',
								time: '',
								show: false
							});
							this.form.fechaDesde = this.form.fechaHasta = '';
							this.form.title = '';
							this.showForm = false;
							this.sort();
							this.save()
						},
						showProgramacion(pr) {
							return this.programacion.length>0
						},
						normalize(items) {
							return items.map(v => {
								v.id = v.id || window.generateId();
								v.show = typeof v.show === 'undefined' ? false : v.show;
								v.showInfo = typeof v.showInfo === 'undefined' ? false : v.showInfo;
								return v;
							})
						},
						remove,
						save: save
					}
				});

				function remove(id) {
					if (!window.confirm('Seguro ?')) {
						return;
					}
					var indexToRemove = null;
					this.programacion.forEach((evt, index) => {
						if (evt.id == id) {
							indexToRemove = index;
						}
					});
					if (indexToRemove!==null) {
						var removed = this.programacion.splice(indexToRemove, 1);
						this.save()
					}

				}

				function save() {
					this.saving = true;
					var dataToSave = this.programacion.map(pr=>{
						var r = {};
						Object.assign(r,pr);
						delete r.showInfo;
						return r;
					})
					apiPost('/api/programacion/save', dataToSave).then(res => {
						this.saving = false
						if (!res.result) {
							new Noty({
								layout: 'bottomRight',
								text: "Problema al guardar",
								type: 'error',
								killer: true,
								delay: false
							}).show();
						} else {
							new Noty({
								timeout: 500,
								layout: 'bottomRight',
								text: "Guardado !",
								type: 'success'
							}).show();
						}
					});
				}
			}
			if(!!init){
				window.pageInit = init;
				init();
			}
	</script>
</body>