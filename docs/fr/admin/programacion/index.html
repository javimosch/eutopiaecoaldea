<!DOCTYPE html>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Pragma" content="no-cache">
	
	<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/img/favicon.ico" type="image/x-icon">
	<title>Eutopía - Centre écologique</title>
	<link rel="stylesheet" type="text/css" href="/libs/noty.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="https://cdn.quilljs.com/1.3.6/quill.snow.css">
	<link rel="stylesheet" type="text/css" href="/styles.css">
</head>
<body>
	<div class="app">
		
		<div class="adminLayout">
			<div class="adminSidebar">
				<header >
					<a class="brand" href="/fr">
						<img src="/uploads/images/euto-logo-trans.png" />
					</a>
					<nav class="headerNav">
						
					</nav>
				</header>
				<div class="blockChilds form developmentPage adminNav admin protected" style="display: none;">
				    <a class="backBtn" href="/" target="_blank">Abrir pagina en una nueva pestaña.</a>
				    <div>
				        <p class="italic fnt-12" style="margin-top:5px">
				            <span>Pagina actualizada el <span v-html="deployedAt"></span></span>
				        </p>
				    </div>
				    <div>
				        <button class="btn" v-cloak v-if="true" @click="(loaders.deploy||isCooldown('deploy'))||deploy()" :disabled="loaders.deploy||isCooldown('deploy')" v-html="loaders.deploy?'Publicando...':'Publicar cambios'"></button>
				        <p class="italic fnt-12" style="margin-top:5px" v-show="isCooldown('deploy')">
				            Cambios publicados recientemente, espera un momento...
				        </p>
				    </div>
				    <!--
				    
				    <div>
				        <button class="btn" v-cloak v-if="true" @click="loaders.wipMode||(isCooldown('wipMode'))||deployWipMode()" :disabled="loaders.wipMode||isCooldown('wipMode')" v-html="loaders.wipMode?'Procesando...':'Actualizar sitio con mensaje indicando que estamos trabajando en la pagina'"></button>
				        <p class="italic fnt-12" style="margin-top:5px" v-show="isCooldown('wipMode')">
				            Cambios publicados recientemente, espera un momento...
				        </p>
				    </div>
				    <p class="fnt-12 italic">Al publicar, el sitio toma entre uno y dos minutos en actualizarse. Una vez pasado este tiempo tenemos que refrescar el navegador manualmente. Si los cambios no aparecen, intentar refrescar el navegador pulsando CTRL+R en reiteradas ocaciones.</p>
				-->
				    <div class="sidebarMenu">
				
				    <a href="/admin/programacion">
				            <i class="fas fa-calendar-alt"></i>
				            Programacion
				        </a>
				    <a href="/admin/voluntarios">
				            <i class="fas fa-people-carry"></i>
				            Voluntarios
				        </a>
				    <a href="/admin/formulario-de-contacto">
				            <i class="fas fa-phone-volume"></i>
				            Contactos
				        </a>
				    <a href="/admin/images">
				            <i class="fas fa-images"></i>
				            Imagenes 
				        </a>
				    <a href="/admin/files">
				            <i class="fas fa-file"></i>
				            Archivos
				        </a>
				    <a href="/admin/pages">
				            <i class="fas fa-book"></i>
				            Paginas
				        </a>
				    <a href="/admin/partials">
				            <i class="fas fa-boxes"></i>
				            Vistas parciales
				        </a>
				
				<a href="/admin/styles">
				            <i class="fas fa-cookie-bite"></i>
				            Estilos CSS
				        </a>
				
				    <a href="/admin/changelog">
				            <i class="fas fa-clipboard-list"></i>
				            Historial de cambios
				        </a>
				    <a href="/admin/faq">
				            <i class="fas fa-book"></i>
				            Documentacion
				        </a>
				    <a href="/admin/avanzado">
				        <i class="fas fa-cogs"></i>
				        Configuracion avanzada</a>
				    <a @click="logout()" class="logout">
				
				        Desconectarse</a>
				        </div>
				</div>
			</div>
			<div class="adminMainContent">
				<div class="mainContent">
					<section class="admin protected container appScope">
					    <h3>Programacion</h3>
					    <button @click="saving || save()" :disabled="saving" class="btn" v-html="saving?'Guardando...':'Guardar'"></button>
					    <button @click="showForm=true" v-show="!showForm" class="btn">Nuevo evento</button>
					    <button @click="sort" v-show="true" class="btn">Ordenar por fecha</button>
					    <div class="form programacionForm" v-show="showForm">
					        <label class="important">Nuevo evento</label>
					        <label>Fecha desde*</label>
					        <input placeholder="DD-MM-YYYY" v-model="form.fechaDesde" />
					        <label>Fecha hasta</label>
					        <input placeholder="DD-MM-YYYY" v-model="form.fechaHasta" />
					        <label>Titulo *</label>
					        <input v-model="form.title" placeholder="Ejemplo: Feria de los artesanos" />
					        <button class="btn" @click="addEvent()">Agregar</button>
					    </div>
					    <ul class="list">
					        <li class="programationItem" v-for="evento in programacion" v-show="showProgramacion(evento)">
					            <div class="eventItem form">
					                <label>Fecha desde</label>
					                <input class="eventoFecha semless " v-model="evento.fechaDesde"></input>
					                <label>Fecha hasta</label>
					                <input class="eventoFecha semless " v-model="evento.fechaHasta"></input>
					                <label>Horario</label>
					                <p class="fnt-12 italic" v-html="(evento.timeFrom||'(Sin especificar)')+' a '+(evento.timeTo||'(Sin especificar)')"></p>
					                <div>
					                    <input class="eventoTitle semless bold" v-model="evento.title"></input>
					                </div>
					                <button class="btn" @click="evento.showInfo=!evento.showInfo" v-show="!evento.showInfo">Ver mas</button>
					                <button class="btn" @click="evento.showInfo=!evento.showInfo" v-show="evento.showInfo">Ver menos</button>
					                <div class="bigDesktopSplitTwo" v-show="evento.showInfo">
					                    <div class="adminProgramacionItemImage">
					                        <img class="img-fluid" :src="evento.image||'https://via.placeholder.com/150x150'"/>
					                    </div>
					                    <div>
					                            
					                            <div>
					                                <html-editor v-model="evento.message"></html-editor>
					                            </div>
					                            <div class="blockChilds">
					                                <label>Mostrar en el sitio web? (si no chequeas esto, el evento permanecera oculto)</label>
					                                <input type="checkbox" v-model="evento.show" />
					                            </div>
					                            <div class="blockChilds">
					                                <label>Imagen</label>
					                                <input v-model="evento.image" />
					                            </div>
					                            <div class="blockChilds">
					                                <label>Hora desde</label>
					                                <input v-model="evento.timeFrom" placeholder="HH:mm" />
					                            </div>
					                            <div class="blockChilds">
					                                <label>Hora hasta</label>
					                                <input v-model="evento.timeTo" placeholder="HH:mm" />
					                            </div>
					                            <div>
					                                <button @click="remove(evento.id)" class="btn danger"><i class="fas fa-trash-alt"></i></button>
					                            </div>
					                    </div>
					                </div>
					            </div>
					        </li>
					    </ul>
					</section>
					<script type="text/javascript">
					window.programacion = JSON.parse(`[{"fechaDesde":"27-07-2019","fechaHasta":"28-07-2019","id":"_y90yolgdx","title":"ECOFESTIVAL para la familia (FESTICAMP)","image":"\\/uploads\\/images\\/festicamp.png","message":"<p>FESTICAMP es un festival que busca acercar a las familias<\\/p><p>chiclayanas (o lambayecanas) a marcas e iniciativas eco<\\/p><p>amigables y tradicionales de la región. Durante los días del<\\/p><p>festival daremos a conocer las prácticas que aplicamos en la<\\/p><p>producción de nuestros cultivos, productos, artículos y<\\/p><p>servicios y en nuestro día a día en general para llevar un estilo<\\/p><p>de vida más sustentable.<\\/p><p>Contaremos con espacios para la feria, talleres, música en vivo,<\\/p><p>malabares, juegos y zona de campamento.<\\/p>","time":"","show":true},{"fechaDesde":"20-06-2019","fechaHasta":"20-06-2019","id":"_vwv0vey39","title":"Registro fotografico: Brigadistas ambientales","image":"\\/uploads\\/images\\/brigadistas_20062019_13.jpg","message":"<p>Se realizo la primera induccion del añio a los brigadistas ambientales de las escuelas<\\/p>","slider":["\\/uploads\\/images\\/brigadistas_20062019_01.jpg","\\/uploads\\/images\\/brigadistas_20062019_02.jpg","\\/uploads\\/images\\/brigadistas_20062019_03.jpg","\\/uploads\\/images\\/brigadistas_20062019_04.jpg","\\/uploads\\/images\\/brigadistas_20062019_05.jpg","\\/uploads\\/images\\/brigadistas_20062019_06.jpg","\\/uploads\\/images\\/brigadistas_20062019_07.jpg","\\/uploads\\/images\\/brigadistas_20062019_08.jpg","\\/uploads\\/images\\/brigadistas_20062019_09.jpg","\\/uploads\\/images\\/brigadistas_20062019_10.jpg","\\/uploads\\/images\\/brigadistas_20062019_11.jpg","\\/uploads\\/images\\/brigadistas_20062019_12.jpg","\\/uploads\\/images\\/brigadistas_20062019_13.jpg","\\/uploads\\/images\\/brigadistas_20062019_14.jpg","\\/uploads\\/images\\/brigadistas_20062019_15.jpg","\\/uploads\\/images\\/brigadistas_20062019_16.jpg","\\/uploads\\/images\\/brigadistas_20062019_17.jpg","\\/uploads\\/images\\/brigadistas_20062019_18.jpg"],"time":"","show":true},{"fechaDesde":"21-04-2019","fechaHasta":"21-04-2019","id":"_e8whpwyh8","title":"Taller Vivencial de Elaboración de Algarrobina (Programa C.R.E.E.R)","image":"\\/uploads\\/images\\/programa-creer-2.jpeg","message":"<p>Programa C.R.E.E.R.<\\/p><p>Taller Vivencial de Elaboración de Algarrobina...<\\/p><p>07 vacantes por grupo.<\\/p><p>Grupo 1: Jueves 21,&nbsp;<\\/p><p>Grupo 2: Sábado 23,<\\/p><p>Horario: 9:30 a.m. - 4:00 p.m.<\\/p><p>Inscripciones al 925542300 o por inbox<\\/p><p>Aportacción: 25.00 soles, incluye almuerzo campestre...<\\/p>","slider":["\\/uploads\\/images\\/programa-creer-3.jpeg","\\/uploads\\/images\\/programa-creer-5.jpeg","\\/uploads\\/images\\/programa-creer-2.jpeg","\\/uploads\\/images\\/programa-creer-1.jpeg"],"time":"","show":true,"timeFrom":"09:30","timeTo":"16:00"},{"fechaDesde":"09-03-2019","fechaHasta":"09-03-2019","id":"_vbedi7n27","title":"PARTICIPACIÓN EN MERCADO ECOLOGICO - ALIANZA FRANCESA","image":"\\/uploads\\/images\\/spring-season-sale-2.png","message":"<p><br><\\/p>","time":"","show":true},{"fechaDesde":"09\\/03\\/2019","fechaHasta":"09\\/03\\/2019","id":"_bwv0vey29","title":"MERCADO ECOLÓGICO ALIANZA FRANCESA","image":"","message":"","time":"","show":false},{"fechaDesde":"09-02-2019","fechaHasta":"09-02-2019","id":"_zl6dtjfhr","title":"ELABORACIÓN DE JABÓN NATURAL Y ARTESANAL, ","image":"\\/uploads\\/images\\/spring-season-sale-1.png","message":"","time":"","show":true},{"fechaDesde":"01-02-2019","fechaHasta":"24-02-2019","id":"_0wbuv0pg6","title":"BIOCONSTRUYENDO EN EUTOPIA ","image":"","message":"","time":"","show":true},{"fechaDesde":"15-01-2019","fechaHasta":"16-01-2019","id":"_3i1jeh7cb","title":"Minga: Remodelación escenario Q'uncha Pachaq","image":"\\/uploads\\/images\\/1.jpg","message":"<p>Continuaremos con la construcción del muro de contención y el llenado de la plataforma del escenario.<\\/p><p>Escríbenos y únete a la minga!<\\/p>","timeFrom":"08:00","timeTo":"16:00","show":true},{"fechaDesde":"14-01-2019","fechaHasta":"15-02-2019","id":"_n43bj65dh","title":"“Pachawasi” Ecoverano 2019","image":"\\/uploads\\/images\\/evento-pachawasi-3.jpg","message":"<p>Pachawasi Ecoverano es un programa educativo piloto que durará 4 semanas que aborda el aprendizaje a través de proyectos en las áreas de matemáticas, comunicación y habilidades sociales con lenguajes artísticos.<\\/p><p><span style=\\\"background-color: rgb(255, 255, 255); color: rgb(34, 34, 34);\\\">La duración del programa es del 14 de enero al 15 de febrero.&nbsp;&nbsp;<\\/span><\\/p><p>Los horarios son de lunes a viernes en dos espacios, martes y jueves en espacio urbano y lunes, miércoles y viernes en Eutopia Ecoaldea.<\\/p><p>Descarga nuestro <a href=\\\"https:\\/\\/eutopiaecoaldea.com\\/uploads\\/files\\/evento-pachawasi-doc-1.docx\\\" target=\\\"_blank\\\">documento explicativo<\\/a>.<\\/p><p>Los esperamos !<\\/p>","slider":["\\/uploads\\/images\\/evento-pachawasi-1.jpg"],"time":"","show":true},{"fechaDesde":"21-12-2018","id":"_t0ykghezt","title":"REMODELACIÓN DE ESCENARIO","image":"\\/uploads\\/images\\/albergue-construccion.jpeg","message":"<p>Construiremos muro de contención en piedra,muros posteriores de escenario y nivelaremos piso<\\/p>","time":"","show":true}]`);
					</script>				</div>
			</div>
		</div>
		
		
		
	</div>
	<script type="text/javascript" src="/js/common-admin.js"></script>
	<script type="text/javascript">
		window.vues = {};
		window.SERVER={
			API_URL: 'http://localhost:3002',
			currentPage: 'page_admin_programacion',
	currentLanguage: 'Français',
			defaultCurrentPage:'page_ecoaldea',
			updateCode:'ZYBnt9si1',
			wipMode: 'false',
			lang: JSON.parse(`{"COMO_FUNCIONA":"Aqui la version en frances","PRODUCTOS_CATALOGO_TITULO":"Nuestra aldea tambien produce una variedad de productos organicos y buenos para la salud!","PRODUCTOS_CATALOGO_BOTON_DESCARGA":"Descarga nuestro catalogo","CONOCER_FERIA":"Conoce nuestra feria","VOLUNTARIADO_FORM_TITLE":"Solicitud","DESCARGA_PROPUESTA":"Descarga nuestra propuesta","ACTUALIDADES":"Actualidades","VOLUNTARIADO_ENVIAR_SOLICITUD_ERROR":"Désolé, nous n'avons pas pu envoyer votre message. Merci d'essayer plus tard ou de nous envoyer l'information par e-mail !","VOLUNTARIADO_ENVIAR_SOLICITUD_SUCCESS":"Merci pour votre message ! Nous vous contacterons sous peu :)","PROGRAMACION":"Programacion","ENVIAR":"Envoyer","TELEFONO":"Telefono","MENSAJE":"Message","EMAIL":"Email","NOMBRE_APELLIDO":"Nom et prénom","HEADER_MESSAGE":"Vivez l'expérience de la nature","FERIAS_PRODUCTORES":"Marché de producteurs","NUESTROS_PRODUCTOS":"Nos produits","PRODUCTOS_FERIAS":"Produits et marchés","PRODUCTOS_FERIAS_INTRO":"Marché de produits bio et locaux ! Venez visiter notre centre écologique pour découvrir des producteurs responsables, goûter leurs délicieux produits et profiter d'une journée dans la nature !","FERIAS_PRODUCTORES_CONTENT_1":"Nous nous engageons auprès des producteurs locaux pour les aider à vendre leur production à un prix juste sur le marché local, afin que la population de Chiclayo et alentours puisse profiter de nos délicieux produits régionaux.<br>Un week-end sur deux, nous organisons un grand marché des producteurs pour que chacun puisse venir vendre ses produits <br> Vous y trouverez du miel, des yaourts artisanaux, des fromages, des fruits et légumes, des boissons fraîches, toujours d'origine naturelle et écologique bien-sûr !","FERIAS_PRODUCTORES_CONTENT_2":"Venez découvrir notre marché et ses producteurs, et profitez-en pour passer la journée en famille dans notre centre écologique, loin du stress de la ville !","FERIAS_PRODUCTORES_CONTENT_3":"Nous vous proposons tous les services pour une journée réussie : aire de jeux, piscine, zone de détente, bibliotèque.<br>                    Eco-restaurant avec des produits frais et biologiques cuisinés sur place.<br>                    Ateliers et activités pour apprendre à tout age sur la permaculture, les plantes, la céramique, la peinture ou pour pratiquer la méditation, le yoga ou le tai-chi!<br>                    Visite guidée de notre jardin, pépinière, compost et du centre de traitement des déchets.<br>                    Scène avec de la musique en live et une offre variée de spectacles (voir programmation)<br>                    Aire de camping<br>                   Et beaucoup plus !","PROFESIONALES":"Entreprises","FAMILIAS":"Familles","ESCUELAS":"Ecoles","ADULTOS":"Maisons de retraite et centres de soin pour personnes agées","pr":"Portugais","it":"Italiano","de":"Allemand","fr":"Français","en":"Anglais","es":"Espagnol","IDIOMAS":"Langue","GRUPOS":"Groupes","GRUPOS_INTRO":"Familles, écoles, entreprises, organisez vos évenements dans notre centre écologique !","GRUPOS_CONTENT_1":"Nous proposons un large choix d'activités, de visites guidées, d'ateliers participatifs afin de créer des événements sur mesure, toujours dans le respect de nos valeurs, en profitant de la nature, dans le partage et l'apprentissage pour des moments inoubliables !","ESCUELAS_1":"Nous accompagnons vos élèves dans la création et l'entretien d'une pépinière, d'un potager et d'un centre de traitement des déchets pour votre école, dans le cadre du plan pour l'environnement !","ADULTOS_1":"Nous vous aidons à améliorer la qualité de vie et le bien-être des personnes agées grâce à des journées de détente, d'apprentissage et de partage de connaissances dans la nature, autour de la permaculture et des plantes qui nous aident à rester en bonne santé","EMPRESAS_1":"Nous organisons vos événements, séminaires, journées d'intégration ou célébrations afin d'offrir à vos employés un moment unique. Renforcement de l'esprit d'équipe, concentration sur le moment présent, en deconnection totale avec la routine et le stress du quotidien.","FAMILIAS_1":"Venez profiter d'un week-end unique dans la nature, avec des activités et des apprentissages pour toute la famille, loin du stress de la ville et du quotidien. L'endroit idéal pour fêter vos anniversaires, diplomations, fêtes de familles.","HEADER_HOME_LABEL":"Découvrir","HOME_INTRO":"Venez profiter de notre centre écologique tous les week-end !","HOME_CONTENT_1":"Notre centre ecologique est ouvert chaque week-end pour que vous puissiez profiter en famille de nos espaces de jeux et de détente, avec des activités pour tous !","HOME_CONTENT_2":"Aire de jeux, piscine, zone de détente, bibliotèque.<br>                    Eco-restaurant avec des produits frais et biologiques cuisinés sur place.<br>                    Ateliers et activités pour apprendre à tout age sur la permaculture, les plantes, la céramique, la peinture ou pour pratiquer la méditation, le yoga ou le tai-chi!<br>                    Visite guidée de notre jardin, pépinière, compost et du centre de traitement des déchets.<br>                    Scène avec de la musique en live et une offre variée de spectacles (voir programmation)<br>                    Aire de camping<br>                   Et beaucoup plus !","HOME_CONTENT_3":"Les horaires d'ouverture au public son du samedi au dimanche, de 9h à 18h","ECOALDEA":"Centre écologique","VOLUNTARIADO":"Bénévoles","VOLUNTARIADO_CONTENT_1":"Pourquoi es-tu interessé par notre programme de bénévolat ?","VOLUNTARIADO_CONTENT_2":"Comment aimerais-tu nous donner un coup de main ? As tu un projet en particulier que tu souhaiterais nous proposer ?","VOLUNTARIADO_CONTENT_3":"Quand penses tu nous rendre visite ?","CONTACTO":"Contact","ABOUT_US":"À propos","ABOUT_US_CONTENT_1":"Nous sommes un ensemble de personnes qui cherchent à vivre de manière durable et autonome. Nous promouvons la permaculture, l'agroécologie, l'éco pédagogie, la santé et le bien-être grâce à divers projets entrepreneuriaux qui nous permettent de financer nos activités.","MISSION":"Mission","MISSION_CONTENT_1":"Partager un lieu au coeur de la Nature où chacun puisse être en connection avec soi-même et avec les autres, qui nous permette d'interagir entre êtres vivants et d'échanger nos connaissances et expériences avec ceux qui le souhaitent","VISION":"Vision","VISION_CONTENT_1":"Etre un centre écologique fonctionnant durablement en autonomie, reconnue pour sa mission et la diversité de cultures, produits et services proposés à la communauté","META_TITLE":"Eutopía - Centre écologique","HOSPEDAJES":"Hébergement","HOSPEDAJES_CONTENT_1":"Notre centre écologique propose des espaces et des services d'hébergement pour que vous puissiez profiter d'une nuit dans la nature et faire durer le week-end !","HOSPEDAJES_TITLE_1":"Camping","HOSPEDAJES_CONTENT_2":"Avec douches, toilettes, électricité, cuisine équipée, piscine, zone de jeux, et beaucoup d'autres espaces et services à découvrir ! 10 soles par tente.","HOSPEDAJES_TITLE_2":"Eco-bungalows","HOSPEDAJES_CONTENT_3":"Nous construisons des bungalows pour vos week-end dans la nature, avec tout le confort de votre maison ! Ouverture prévue en février 2019 : Tenez-vous prêts !"}`)
		}
	</script>
	<script type="text/javascript" src="/libs/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.21/vue.min.js"></script>
	<script type="text/javascript" src='/libs/vue-components.js'></script>
	
	<script type="text/javascript" src="/libs/moment.js"></script>
	<script type="text/javascript" src="/libs/noty.min.js"></script>
	
	<script type="text/javascript" src="/libs/slider.js"></script>

	<script type="text/javascript">
		window.moment.locale('es');
	</script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/ace.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/theme-monokai.js"></script>
	
	<script type="text/javascript" src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
	<script type="text/javascript">
			function init() {


				new Vue({
					el: '.appScope',
					name: 'adminProgramacion',
					data() {
						return {
							showForm: false,
							form: {
								fecha: '',
								title: ''
							},
							saving: false,
							programacion: this.normalize(window.programacion)
						}
					},
					created() {
						fetch(`${SERVER.API_URL}/api/programacion/fetch`).then(r => r.json().then(response => {
							//this.programacion = this.normalize(response.result);
						}));
					},
					mounted() {
						this.sort();
					},
					methods: {
						sort(){
							this.programacion = this.programacion.sort(function(a,b){
								return moment(a.fechaDesde,'DD-MM-YYYY').isBefore(moment(b.fechaDesde,'DD-MM-YYYY'),'day') ? 1 : -1;
							});
						},
						addEvent() {
							this.programacion = this.programacion || [];
							if(!this.form.fechaDesde || !this.form.title){
								return;
							}
							this.programacion.push({
								fechaDesde: this.form.fechaDesde,
								fechaHasta: this.form.fechaHasta || '',
								id: window.generateId(),
								title: this.form.title,
								image: '',
								message: '',
								time: '',
								show: false
							});
							this.form.fechaDesde = this.form.fechaHasta = '';
							this.form.title = '';
							this.showForm = false;
							this.sort();
							this.save()
						},
						showProgramacion(pr) {
							return this.programacion.length>0
						},
						normalize(items) {
							return items.map(v => {
								v.id = v.id || window.generateId();
								v.show = typeof v.show === 'undefined' ? false : v.show;
								v.showInfo = typeof v.showInfo === 'undefined' ? false : v.showInfo;
								return v;
							})
						},
						remove,
						save: save
					}
				});

				function remove(id) {
					if (!window.confirm('Seguro ?')) {
						return;
					}
					var indexToRemove = null;
					this.programacion.forEach((evt, index) => {
						if (evt.id == id) {
							indexToRemove = index;
						}
					});
					if (indexToRemove!==null) {
						var removed = this.programacion.splice(indexToRemove, 1);
						this.save()
					}

				}

				function save() {
					this.saving = true;
					var dataToSave = this.programacion.map(pr=>{
						var r = {};
						Object.assign(r,pr);
						delete r.showInfo;
						return r;
					})
					apiPost('/api/programacion/save', dataToSave).then(res => {
						this.saving = false
						if (!res.result) {
							new Noty({
								layout: 'bottomRight',
								text: "Problema al guardar",
								type: 'error',
								killer: true,
								delay: false
							}).show();
						} else {
							new Noty({
								timeout: 500,
								layout: 'bottomRight',
								text: "Guardado !",
								type: 'success'
							}).show();
						}
					});
				}
			}
			if(!!init){
				window.pageInit = init;
				init();
			}
	</script>
</body>