<!DOCTYPE html>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Pragma" content="no-cache">
	
	<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/img/favicon.ico" type="image/x-icon">
	<title>Eutopía - Ecocenter</title>
	<link rel="stylesheet" type="text/css" href="/libs/noty.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="https://cdn.quilljs.com/1.3.6/quill.snow.css">
	<link rel="stylesheet" type="text/css" href="/styles.css">
</head>
<body>
	<div class="app">
		
		<div class="adminLayout">
			<div class="adminSidebar">
				<header >
					<a class="brand" href="/en">
						<img src="/uploads/images/euto-logo-trans.png" />
					</a>
					<nav class="headerNav">
						
					</nav>
				</header>
				<div class="blockChilds form developmentPage adminNav admin protected" style="display: none;">
				    <a class="backBtn" href="/" target="_blank">Abrir pagina en una nueva pestaña.</a>
				    <div>
				        <p class="italic fnt-12" style="margin-top:5px">
				            <span>Pagina actualizada el <span v-html="deployedAt"></span></span>
				        </p>
				    </div>
				    <div>
				        <button class="btn" v-cloak v-if="true" @click="(loaders.deploy||isCooldown('deploy'))||deploy()" :disabled="loaders.deploy||isCooldown('deploy')" v-html="loaders.deploy?'Publicando...':'Publicar cambios'"></button>
				        <p class="italic fnt-12" style="margin-top:5px" v-show="isCooldown('deploy')">
				            Cambios publicados recientemente, espera un momento...
				        </p>
				    </div>
				    <!--
				    
				    <div>
				        <button class="btn" v-cloak v-if="true" @click="loaders.wipMode||(isCooldown('wipMode'))||deployWipMode()" :disabled="loaders.wipMode||isCooldown('wipMode')" v-html="loaders.wipMode?'Procesando...':'Actualizar sitio con mensaje indicando que estamos trabajando en la pagina'"></button>
				        <p class="italic fnt-12" style="margin-top:5px" v-show="isCooldown('wipMode')">
				            Cambios publicados recientemente, espera un momento...
				        </p>
				    </div>
				    <p class="fnt-12 italic">Al publicar, el sitio toma entre uno y dos minutos en actualizarse. Una vez pasado este tiempo tenemos que refrescar el navegador manualmente. Si los cambios no aparecen, intentar refrescar el navegador pulsando CTRL+R en reiteradas ocaciones.</p>
				-->
				    <div class="sidebarMenu">
				
				    <a href="/admin/programacion">
				            <i class="fas fa-calendar-alt"></i>
				            Programacion
				        </a>
				    <a href="/admin/voluntarios">
				            <i class="fas fa-people-carry"></i>
				            Voluntarios
				        </a>
				    <a href="/admin/formulario-de-contacto">
				            <i class="fas fa-phone-volume"></i>
				            Contactos
				        </a>
				    <a href="/admin/images">
				            <i class="fas fa-images"></i>
				            Imagenes 
				        </a>
				    <a href="/admin/files">
				            <i class="fas fa-file"></i>
				            Archivos
				        </a>
				    <a href="/admin/pages">
				            <i class="fas fa-book"></i>
				            Paginas
				        </a>
				    <a href="/admin/partials">
				            <i class="fas fa-boxes"></i>
				            Vistas parciales
				        </a>
				
				<a href="/admin/styles">
				            <i class="fas fa-cookie-bite"></i>
				            Estilos CSS
				        </a>
				
				    <a href="/admin/changelog">
				            <i class="fas fa-clipboard-list"></i>
				            Historial de cambios
				        </a>
				    <a href="/admin/faq">
				            <i class="fas fa-book"></i>
				            Documentacion
				        </a>
				    <a href="/admin/avanzado">
				        <i class="fas fa-cogs"></i>
				        Configuracion avanzada</a>
				    <a @click="logout()" class="logout">
				
				        Desconectarse</a>
				        </div>
				</div>
			</div>
			<div class="adminMainContent">
				<div class="mainContent">
					<section class="admin protected container appScope">
					    <h3>Programacion</h3>
					    <button @click="saving || save()" :disabled="saving" class="btn" v-html="saving?'Guardando...':'Guardar'"></button>
					    <button @click="showForm=true" v-show="!showForm" class="btn">Nuevo evento</button>
					    <button @click="sort" v-show="true" class="btn">Ordenar por fecha</button>
					    <div class="form programacionForm" v-show="showForm">
					        <label class="important">Nuevo evento</label>
					        <label>Fecha desde*</label>
					        <input placeholder="DD-MM-YYYY" v-model="form.fechaDesde" />
					        <label>Fecha hasta</label>
					        <input placeholder="DD-MM-YYYY" v-model="form.fechaHasta" />
					        <label>Titulo *</label>
					        <input v-model="form.title" placeholder="Ejemplo: Feria de los artesanos" />
					        <button class="btn" @click="addEvent()">Agregar</button>
					    </div>
					    <ul class="list">
					        <li class="programationItem" v-for="evento in programacion" v-show="showProgramacion(evento)">
					            <div class="eventItem form">
					                <label>Fecha desde</label>
					                <input class="eventoFecha semless " v-model="evento.fechaDesde"></input>
					                <label>Fecha hasta</label>
					                <input class="eventoFecha semless " v-model="evento.fechaHasta"></input>
					                <label>Horario</label>
					                <p class="fnt-12 italic" v-html="(evento.timeFrom||'(Sin especificar)')+' a '+(evento.timeTo||'(Sin especificar)')"></p>
					                <div>
					                    <input class="eventoTitle semless bold" v-model="evento.title"></input>
					                </div>
					                <button class="btn" @click="evento.showInfo=!evento.showInfo" v-show="!evento.showInfo">Ver mas</button>
					                <button class="btn" @click="evento.showInfo=!evento.showInfo" v-show="evento.showInfo">Ver menos</button>
					                <div class="bigDesktopSplitTwo" v-show="evento.showInfo">
					                    <div class="adminProgramacionItemImage">
					                        <img class="img-fluid" :src="evento.image||'https://via.placeholder.com/150x150'"/>
					                    </div>
					                    <div>
					                            
					                            <div>
					                                <html-editor v-model="evento.message"></html-editor>
					                            </div>
					                            <div class="blockChilds">
					                                <label>Mostrar en el sitio web? (si no chequeas esto, el evento permanecera oculto)</label>
					                                <input type="checkbox" v-model="evento.show" />
					                            </div>
					                            <div class="blockChilds">
					                                <label>Imagen</label>
					                                <input v-model="evento.image" />
					                            </div>
					                            <div class="blockChilds">
					                                <label>Hora desde</label>
					                                <input v-model="evento.timeFrom" placeholder="HH:mm" />
					                            </div>
					                            <div class="blockChilds">
					                                <label>Hora hasta</label>
					                                <input v-model="evento.timeTo" placeholder="HH:mm" />
					                            </div>
					                            <div>
					                                <button @click="remove(evento.id)" class="btn danger"><i class="fas fa-trash-alt"></i></button>
					                            </div>
					                    </div>
					                </div>
					            </div>
					        </li>
					    </ul>
					</section>
					<script type="text/javascript">
					window.programacion = JSON.parse(`[{"fechaDesde":"27-07-2019","fechaHasta":"28-07-2019","id":"_y90yolgdx","title":"ECOFESTIVAL para la familia (FESTICAMP)","image":"\\/uploads\\/images\\/festicamp.png","message":"<p>FESTICAMP es un festival que busca acercar a las familias<\\/p><p>chiclayanas (o lambayecanas) a marcas e iniciativas eco<\\/p><p>amigables y tradicionales de la región. Durante los días del<\\/p><p>festival daremos a conocer las prácticas que aplicamos en la<\\/p><p>producción de nuestros cultivos, productos, artículos y<\\/p><p>servicios y en nuestro día a día en general para llevar un estilo<\\/p><p>de vida más sustentable.<\\/p><p>Contaremos con espacios para la feria, talleres, música en vivo,<\\/p><p>malabares, juegos y zona de campamento.<\\/p>","time":"","show":true},{"fechaDesde":"20-06-2019","fechaHasta":"20-06-2019","id":"_vwv0vey39","title":"Registro fotografico: Brigadistas ambientales","image":"\\/uploads\\/images\\/brigadistas_20062019_13.jpg","message":"<p>Se realizo la primera induccion del añio a los brigadistas ambientales de las escuelas<\\/p>","slider":["\\/uploads\\/images\\/brigadistas_20062019_01.jpg","\\/uploads\\/images\\/brigadistas_20062019_02.jpg","\\/uploads\\/images\\/brigadistas_20062019_03.jpg","\\/uploads\\/images\\/brigadistas_20062019_04.jpg","\\/uploads\\/images\\/brigadistas_20062019_05.jpg","\\/uploads\\/images\\/brigadistas_20062019_06.jpg","\\/uploads\\/images\\/brigadistas_20062019_07.jpg","\\/uploads\\/images\\/brigadistas_20062019_08.jpg","\\/uploads\\/images\\/brigadistas_20062019_09.jpg","\\/uploads\\/images\\/brigadistas_20062019_10.jpg","\\/uploads\\/images\\/brigadistas_20062019_11.jpg","\\/uploads\\/images\\/brigadistas_20062019_12.jpg","\\/uploads\\/images\\/brigadistas_20062019_13.jpg","\\/uploads\\/images\\/brigadistas_20062019_14.jpg","\\/uploads\\/images\\/brigadistas_20062019_15.jpg","\\/uploads\\/images\\/brigadistas_20062019_16.jpg","\\/uploads\\/images\\/brigadistas_20062019_17.jpg","\\/uploads\\/images\\/brigadistas_20062019_18.jpg"],"time":"","show":true},{"fechaDesde":"21-04-2019","fechaHasta":"21-04-2019","id":"_e8whpwyh8","title":"Taller Vivencial de Elaboración de Algarrobina (Programa C.R.E.E.R)","image":"\\/uploads\\/images\\/programa-creer-2.jpeg","message":"<p>Programa C.R.E.E.R.<\\/p><p>Taller Vivencial de Elaboración de Algarrobina...<\\/p><p>07 vacantes por grupo.<\\/p><p>Grupo 1: Jueves 21,&nbsp;<\\/p><p>Grupo 2: Sábado 23,<\\/p><p>Horario: 9:30 a.m. - 4:00 p.m.<\\/p><p>Inscripciones al 925542300 o por inbox<\\/p><p>Aportacción: 25.00 soles, incluye almuerzo campestre...<\\/p>","slider":["\\/uploads\\/images\\/programa-creer-3.jpeg","\\/uploads\\/images\\/programa-creer-5.jpeg","\\/uploads\\/images\\/programa-creer-2.jpeg","\\/uploads\\/images\\/programa-creer-1.jpeg"],"time":"","show":true,"timeFrom":"09:30","timeTo":"16:00"},{"fechaDesde":"09-03-2019","fechaHasta":"09-03-2019","id":"_vbedi7n27","title":"PARTICIPACIÓN EN MERCADO ECOLOGICO - ALIANZA FRANCESA","image":"\\/uploads\\/images\\/spring-season-sale-2.png","message":"<p><br><\\/p>","time":"","show":true},{"fechaDesde":"09\\/03\\/2019","fechaHasta":"09\\/03\\/2019","id":"_bwv0vey29","title":"MERCADO ECOLÓGICO ALIANZA FRANCESA","image":"","message":"","time":"","show":false},{"fechaDesde":"09-02-2019","fechaHasta":"09-02-2019","id":"_zl6dtjfhr","title":"ELABORACIÓN DE JABÓN NATURAL Y ARTESANAL, ","image":"\\/uploads\\/images\\/spring-season-sale-1.png","message":"","time":"","show":true},{"fechaDesde":"01-02-2019","fechaHasta":"24-02-2019","id":"_0wbuv0pg6","title":"BIOCONSTRUYENDO EN EUTOPIA ","image":"","message":"","time":"","show":true},{"fechaDesde":"15-01-2019","fechaHasta":"16-01-2019","id":"_3i1jeh7cb","title":"Minga: Remodelación escenario Q'uncha Pachaq","image":"\\/uploads\\/images\\/1.jpg","message":"<p>Continuaremos con la construcción del muro de contención y el llenado de la plataforma del escenario.<\\/p><p>Escríbenos y únete a la minga!<\\/p>","timeFrom":"08:00","timeTo":"16:00","show":true},{"fechaDesde":"14-01-2019","fechaHasta":"15-02-2019","id":"_n43bj65dh","title":"“Pachawasi” Ecoverano 2019","image":"\\/uploads\\/images\\/evento-pachawasi-3.jpg","message":"<p>Pachawasi Ecoverano es un programa educativo piloto que durará 4 semanas que aborda el aprendizaje a través de proyectos en las áreas de matemáticas, comunicación y habilidades sociales con lenguajes artísticos.<\\/p><p><span style=\\\"background-color: rgb(255, 255, 255); color: rgb(34, 34, 34);\\\">La duración del programa es del 14 de enero al 15 de febrero.&nbsp;&nbsp;<\\/span><\\/p><p>Los horarios son de lunes a viernes en dos espacios, martes y jueves en espacio urbano y lunes, miércoles y viernes en Eutopia Ecoaldea.<\\/p><p>Descarga nuestro <a href=\\\"https:\\/\\/eutopiaecoaldea.com\\/uploads\\/files\\/evento-pachawasi-doc-1.docx\\\" target=\\\"_blank\\\">documento explicativo<\\/a>.<\\/p><p>Los esperamos !<\\/p>","slider":["\\/uploads\\/images\\/evento-pachawasi-1.jpg"],"time":"","show":true},{"fechaDesde":"21-12-2018","id":"_t0ykghezt","title":"REMODELACIÓN DE ESCENARIO","image":"\\/uploads\\/images\\/albergue-construccion.jpeg","message":"<p>Construiremos muro de contención en piedra,muros posteriores de escenario y nivelaremos piso<\\/p>","time":"","show":true}]`);
					</script>				</div>
			</div>
		</div>
		
		
		
	</div>
	<script type="text/javascript" src="/js/common-admin.js"></script>
	<script type="text/javascript">
		window.vues = {};
		window.SERVER={
			API_URL: 'http://localhost:3002',
			currentPage: 'page_admin_programacion',
	currentLanguage: 'English',
			defaultCurrentPage:'page_ecoaldea',
			updateCode:'ZYBnt9si1',
			wipMode: 'false',
			lang: JSON.parse(`{"COMO_FUNCIONA":"Necesitas agregar una propiedad (object key) por acada idioma.","PRODUCTOS_CATALOGO_TITULO":"Nuestra aldea tambien produce una variedad de productos organicos y buenos para la salud!","PRODUCTOS_CATALOGO_BOTON_DESCARGA":"Descarga nuestro catalogo","CONOCER_FERIA":"Conoce nuestra feria","VOLUNTARIADO_FORM_TITLE":"Solicitud","DESCARGA_PROPUESTA":"Descarga nuestra propuesta","ACTUALIDADES":"News","VOLUNTARIADO_ENVIAR_SOLICITUD_ERROR":"Sorry, we could not register your application. Please, try again later or send us an email with your information. Thank you !","VOLUNTARIADO_ENVIAR_SOLICITUD_SUCCESS":"Thank you for your application ! We will contact you soon :)","PROGRAMACION":"Programation","ENVIAR":"Send","TELEFONO":"Phone","MENSAJE":"Message","EMAIL":"Email","NOMBRE_APELLIDO":"Name and surname","HEADER_MESSAGE":"Enjoy the experience of nature","FERIAS_PRODUCTORES":"Local products market","NUESTROS_PRODUCTOS":"Our products","PRODUCTOS_FERIAS":"Products and fairs","PRODUCTOS_FERIAS_INTRO":"Organic and local products fair ! Come to our eco-center to discover local producers who respect nature, try their delicious products and enjoy being in the countryside, surrounded by nature !","FERIAS_PRODUCTORES_CONTENT_1":"We are engaged in helping local producers to sell their production for a fair price to the local market, to offer the best of our local products to the inhabitants of Chiclayo and the nearby areas. <br> One in two week-end, we organize a fair with all the producers where we sell a large diversity of local products.<br> You will find honey, yogurt, cheese, fruits, vegetables, fresh drinks, all natural and organic !","FERIAS_PRODUCTORES_CONTENT_2":"Come and visit us for the fairs and enjoy our eco-center to spend a family day away from the city !","FERIAS_PRODUCTORES_CONTENT_3":"We offer all the facilities for you to have a great day : playground, swimming pool, relaxing area, reading area.<br>                    Eco-restaurant with fresh ecological product homecooked.<br>                    Workshops to learn and discover at any age about permaculture, crops, ceramic, painting, or to practice meditation, yoga, or Tai-chi !<br>                    Visits with explainations about our garden, plant nursery, compost and waste treatment area.<br>                    Stage with live music and a diversity of shows (see our programation)<br>                    Camping zone<br>                    And much more ! !","PROFESIONALES":"Companies","FAMILIAS":"Families","ESCUELAS":"Schools","ADULTOS":"Care centers for elderly people","pr":"Portuguese","it":"Italian","de":"German","fr":"French","en":"English","es":"Spanish","IDIOMAS":"Language","GRUPOS":"Groups","GRUPOS_INTRO":"Families, schools, companies, organize your events in our eco-center !","GRUPOS_CONTENT_1":"We offer a large range of activities, visits, workshops to create on-demand events customized just for you ! Always looking forward to share experiences, learn and enjoy the nature for unforgettable moments !","ESCUELAS_1":"We guide your students through the creation of a plant nursery, a garden and a waste treatment area for you school !","ADULTOS_1":"We help you improve the well being of the elderly. We offer a full relaxing days of activities in the nature to learn and share knowledge about permaculture and the plants that help us keep a good health ! ","EMPRESAS_1":"We organize your seminars or celebrations in our eco-center to offer your employees a unique souvenir of these important moments ! Team building, focus on the present moment, in total desconnection with the day to day stress and routine.","FAMILIAS_1":"Come and enjoy a unique week-end in the nature, with activities and learnings for all the family, disconnected from the day to day life and the city ! Ideal to celebrate birthdays, graduation, anniversaries !","HEADER_HOME_LABEL":"Discover","HOME_INTRO":"Visit and enjoy our eco-center every week-end !","HOME_CONTENT_1":"Our eco-center in the nature is opened every week-end so that you can enjoy being in the countryside, in a place where you can have fun and relax with activities for all the family !","HOME_CONTENT_2":"playground, swimming pool, relaxing area, reading area.<br>                    Eco-restaurant with fresh ecological product homecooked.<br>                    Workshops to learn and discover at any age about permaculture, crops, ceramic, painting, or to practice meditation, yoga, or Tai-chi !<br>                    Visits with explainations about our garden, plant nursery, compost and waste treatment area.<br>                    Stage with live music and a diversity of shows (see our programation)<br>                    Camping zone<br>                    And much more ! !","HOME_CONTENT_3":"We are opened for the visitors from saturday to sunday, from 9am to 6pm","ECOALDEA":"Ecocenter","VOLUNTARIADO":"Volonteer","VOLUNTARIADO_CONTENT_1":"Why are you interested in visiting us ?","VOLUNTARIADO_CONTENT_2":"How would you like to help us ? Do you have a project in particular you would like to propose ?","VOLUNTARIADO_CONTENT_3":"When do you plan to come ?","CONTACTO":"Contact","ABOUT_US":"About us","ABOUT_US_CONTENT_1":"We are a group of people who look forward to live in a sustainable way, promoting permaculture, agro ecology, eco pedagogy and healthy life, generating small entrepreneurial projects to finance our activities","MISSION":"Mission","MISSION_CONTENT_1":"Share a place in deep connection with nature, with one-self and the other living beings to create interactions and share one's knowledge and experiences with anyone interested in it","VISION":"Vision","VISION_CONTENT_1":"Be an eco-center self-sustained and recognized for its mission and the diversity of crops, products and services proposed to the comunity ","META_TITLE":"Eutopía - Ecocenter","HOSPEDAJES":"Lodgings","HOSPEDAJES_CONTENT_1":"Our eco-center offers lodging services so that you can spend the night in the nature and make the week-end last longer !","HOSPEDAJES_TITLE_1":"Camping","HOSPEDAJES_CONTENT_2":"With shower, toilets, electricity, fully-equiped kitchen, playground, swimming pool, and many other services and facilities ! 10 soles per tent","HOSPEDAJES_TITLE_2":"Eco-bungalows","HOSPEDAJES_CONTENT_3":"We are building bungalows so that you can spend the week-end in the nature with all the confort of your house ! Opening in February 2019 : Stay tuned !"}`)
		}
	</script>
	<script type="text/javascript" src="/libs/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.21/vue.min.js"></script>
	<script type="text/javascript" src='/libs/vue-components.js'></script>
	
	<script type="text/javascript" src="/libs/moment.js"></script>
	<script type="text/javascript" src="/libs/noty.min.js"></script>
	
	<script type="text/javascript" src="/libs/slider.js"></script>

	<script type="text/javascript">
		window.moment.locale('es');
	</script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/ace.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/theme-monokai.js"></script>
	
	<script type="text/javascript" src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
	<script type="text/javascript">
			function init() {


				new Vue({
					el: '.appScope',
					name: 'adminProgramacion',
					data() {
						return {
							showForm: false,
							form: {
								fecha: '',
								title: ''
							},
							saving: false,
							programacion: this.normalize(window.programacion)
						}
					},
					created() {
						fetch(`${SERVER.API_URL}/api/programacion/fetch`).then(r => r.json().then(response => {
							//this.programacion = this.normalize(response.result);
						}));
					},
					mounted() {
						this.sort();
					},
					methods: {
						sort(){
							this.programacion = this.programacion.sort(function(a,b){
								return moment(a.fechaDesde,'DD-MM-YYYY').isBefore(moment(b.fechaDesde,'DD-MM-YYYY'),'day') ? 1 : -1;
							});
						},
						addEvent() {
							this.programacion = this.programacion || [];
							if(!this.form.fechaDesde || !this.form.title){
								return;
							}
							this.programacion.push({
								fechaDesde: this.form.fechaDesde,
								fechaHasta: this.form.fechaHasta || '',
								id: window.generateId(),
								title: this.form.title,
								image: '',
								message: '',
								time: '',
								show: false
							});
							this.form.fechaDesde = this.form.fechaHasta = '';
							this.form.title = '';
							this.showForm = false;
							this.sort();
							this.save()
						},
						showProgramacion(pr) {
							return this.programacion.length>0
						},
						normalize(items) {
							return items.map(v => {
								v.id = v.id || window.generateId();
								v.show = typeof v.show === 'undefined' ? false : v.show;
								v.showInfo = typeof v.showInfo === 'undefined' ? false : v.showInfo;
								return v;
							})
						},
						remove,
						save: save
					}
				});

				function remove(id) {
					if (!window.confirm('Seguro ?')) {
						return;
					}
					var indexToRemove = null;
					this.programacion.forEach((evt, index) => {
						if (evt.id == id) {
							indexToRemove = index;
						}
					});
					if (indexToRemove!==null) {
						var removed = this.programacion.splice(indexToRemove, 1);
						this.save()
					}

				}

				function save() {
					this.saving = true;
					var dataToSave = this.programacion.map(pr=>{
						var r = {};
						Object.assign(r,pr);
						delete r.showInfo;
						return r;
					})
					apiPost('/api/programacion/save', dataToSave).then(res => {
						this.saving = false
						if (!res.result) {
							new Noty({
								layout: 'bottomRight',
								text: "Problema al guardar",
								type: 'error',
								killer: true,
								delay: false
							}).show();
						} else {
							new Noty({
								timeout: 500,
								layout: 'bottomRight',
								text: "Guardado !",
								type: 'success'
							}).show();
						}
					});
				}
			}
			if(!!init){
				window.pageInit = init;
				init();
			}
	</script>
</body>